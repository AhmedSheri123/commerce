{% if request.user.is_authenticated %}
  <button
    id="active-users-fab"
    type="button"
    class="fixed bottom-44 md:bottom-20 left-4 z-40 flex h-16 w-16 items-center justify-center rounded-full bg-green-600 text-white shadow-lg hover:bg-emerald-700 transition"
    title="Active Users"
  >
    <div class="text-center">
      <span id="active-users-count-fab" class="font-bold">{{ active_users_count|default_if_none:0 }}</span>
      <span class="text-[10px] leading-tight text-center font-semibold px-1 block">Active</span>
    </div>
  </button>

  <div
    id="active-users-modal"
    class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 p-4"
    aria-hidden="true"
  >
    <div class="w-full max-w-sm rounded-xl bg-white p-5 shadow-2xl">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-bold text-gray-800">Online Users</h3>
        <button id="close-active-users-modal" type="button" class="text-gray-500 hover:text-gray-700 text-xl leading-none">&times;</button>
      </div>
      <p class="mt-4 text-sm text-gray-600">Current connected users:</p>
      <p id="active-users-count-modal" class="mt-1 text-3xl font-extrabold text-green-600">{{ active_users_count|default_if_none:0 }}</p>
      <p class="mt-3 text-xs text-gray-400">Updates every 5 seconds</p>
    </div>
  </div>


{% endif %}
